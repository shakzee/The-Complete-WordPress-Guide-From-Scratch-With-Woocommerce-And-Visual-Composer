!function(r){"use strict";r(function(){var o=function(){r("#evf-modal-select-form").length&&(r("#evf-modal-select-form").get(0).selectedIndex=0,r("#evf-modal-checkbox-title, #evf-modal-checkbox-description").prop("checked",!1)),r("#evf-modal-backdrop, #evf-modal-wrap").css("display","none"),r(document.body).removeClass("modal-open")};r(document).on("click",".evf-insert-form-button",function(e){e.preventDefault(),r("#evf-modal-backdrop, #evf-modal-wrap").css("display","block"),r(document.body).addClass("modal-open")}),r(document).on("click","#evf-modal-close, #evf-modal-cancel a",function(e){e.preventDefault(),o()}),r(document).on("click","#evf-modal-submit",function(e){var t;e.preventDefault(),t='[everest_form id="'+r("#evf-modal-select-form").val()+'"',r("#evf-modal-checkbox-title").is(":checked")&&(t+=' title="true"'),r("#evf-modal-checkbox-description").is(":checked")&&(t+=' description="true"'),t+="]",wp.media.editor.insert(t),o()}),{$setup_form:r("form.everest-forms-setup"),init:function(){this.title_focus(),this.$setup_form.on("click",".evf-template-select",this.template_select),r(document.body).on("keypress",".everest-forms-setup-form-name input",this.input_keypress)},title_focus:function(){setTimeout(function(){r("#everest-forms-setup-name").focus()},100)},template_select:function(e){e.preventDefault();var t=r(this),o=r("#everest-forms-setup-name"),a=t.data("template"),n=t.data("template-name-raw"),s="";if(!t.parent().hasClass("loading")){s=o.val()?o.val():n,t.parent().addClass("loading");var c={title:s,action:"everest_forms_create_form",template:a,security:everest_add_form_params.create_form_nonce};r.post(everest_add_form_params.ajax_url,c,function(e){e.success?(t.parent().removeClass("loading"),window.location.href=e.data.redirect):window.console.log(e)}).fail(function(e){window.console.log(e.responseText)})}},input_keypress:function(e){if(13===(e.keyCode||e.which)&&"input"===e.target.tagName.toLowerCase())return e.preventDefault(),!1}}.init()})}(jQuery);